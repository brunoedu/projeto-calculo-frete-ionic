<!--
  Generated template for the CalculoFrete page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title>CÃ¡lculo de Frete</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding text-center>
	<p *ngIf="enviarCalculo && !calculoFrete.valid" style="color: #ea6153;">Selecione as cidades corretamente.</p>
	 
	<ion-list no-lines>
	 
	    <form [formGroup]="calculoFrete">
	 
	        <ion-item>
	            <ion-label floating>Cidade Origem</ion-label>
			    <ion-select formControlName="origem" [class.invalid]="!calculoFrete.controls.origem.valid && (calculoFrete.controls.origem.dirty || enviarCalculo)" (ionChange)="removeArrayCity(1)">
		      	  <ion-option *ngFor="let city of cities" value="{{city.id}}">{{city.nome}}</ion-option>      
			    </ion-select>
	        </ion-item>

	        <ion-item>
	            <ion-label floating>Cidade Destino</ion-label>
			    <ion-select formControlName="destino" [class.invalid]="!calculoFrete.controls.destino.valid && (calculoFrete.controls.destino.dirty || enviarCalculo)" (ionChange)="removeArrayCity(2)">
		      	  <ion-option *ngFor="let city of cities" value="{{city.id}}">{{city.nome}}</ion-option>  
			    </ion-select>
	        </ion-item>

	        <ion-item>		    
			    <button item-right ion-button round icon-left (click)="calcularFrete()">
				  <ion-icon name="calculator"></ion-icon>
				  Calcular Frete
				</button>
	        </ion-item>
	 
	    </form>
	 
	</ion-list>

	<ion-list *ngIf="retornoFrete!=undefined">
	  <ion-item>
	    <ion-icon color="primary" name="map" item-left></ion-icon>
	      <p>Origem</p>
	      <h3>{{retornoFrete.cidadeA.nome}}</h3>
	      <p>Destino</p>
	      <h3>{{retornoFrete.cidadeB.nome}}</h3>
	      <div item-right text-center>
		      <p>{{retornoFrete.distancia.toFixed(2)}} km</p>
		      <br/>
		      <p>R$ {{retornoFrete.valorFrete.toFixed(2)}}</p>
	      </div>
	  </ion-item>
	</ion-list>
</ion-content>
